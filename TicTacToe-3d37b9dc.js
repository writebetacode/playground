import{c as r,r as n,o as e,a as t,b as a,u as o,t as i,d as c,e as u,w as l,f as s,g as f,_ as d,i as v,h,j as y,k as p,l as b,m as w,n as g,p as x,q as j,s as A,v as m,x as P,y as W,z as _,A as E,B as I,C as D,D as M,E as O,F as k,G as q}from"./bundle-23cf4ecd.js";const N=a();function R(a){let[o,i]=r(a.store.get()),c=a.store.on("@changed",((r,e)=>{Object.keys(e).forEach((r=>{i(r,n(e[r]))}))}));return e((()=>c())),t(N.Provider,{value:[o,a.store.dispatch],children:()=>a.children})}function C(){return o(N)}var S=l("unscopables"),B=Array.prototype;null==B[S]&&s.f(B,S,{configurable:!0,value:f(null)});var X;function T(r){if("object"!=typeof r)return r;var n,e,t=Object.prototype.toString.call(r);if("[object Object]"===t){if(r.constructor!==Object&&"function"==typeof r.constructor)for(n in e=new r.constructor,r)e.hasOwnProperty(n)&&e[n]!==r[n]&&(e[n]=T(r[n]));else for(n in e={},r)"__proto__"===n?Object.defineProperty(e,n,{value:T(r[n]),configurable:!0,enumerable:!0,writable:!0}):e[n]=T(r[n]);return e}if("[object Array]"===t){for(n=r.length,e=Array(n);n--;)e[n]=T(r[n]);return e}return"[object Set]"===t?(e=new Set,r.forEach((function(r){e.add(T(r))})),e):"[object Map]"===t?(e=new Map,r.forEach((function(r,n){e.set(T(n),T(r))})),e):"[object Date]"===t?new Date(+r):"[object RegExp]"===t?((e=new RegExp(r.source,r.flags)).lastIndex=r.lastIndex,e):"[object DataView]"===t?new r.constructor(T(r.buffer)):"[object ArrayBuffer]"===t?r.slice(0):"Array]"===t.slice(-6)?new r.constructor(r):r}d({target:"Array",proto:!0},{fill:function(r){for(var n=i(this),e=c(n.length),t=arguments.length,a=u(t>1?arguments[1]:void 0,e),o=t>2?arguments[2]:void 0,l=void 0===o?e:u(o,e);l>a;)n[a++]=r;return n}}),X="fill",B[S][X]=!0,d({target:"Array",stat:!0},{isArray:v});var z,F=function(){return 0===Math.round(Math.random())?"O":"X"},G={board:{winner:"",currentPlayer:F(),rows:[Array(3).fill({player:"",isWinner:0}),Array(3).fill({player:"",isWinner:0}),Array(3).fill({player:"",isWinner:0})]}},V=(r=>{let n={},e={},t={dispatch(r,a){if("@dispatch"!==r&&t.dispatch("@dispatch",[r,a,n[r]]),n[r]){let o;n[r].forEach((i=>{let c=n[r].includes(i)&&i(e,a,t);c&&"function"!=typeof c.then&&(e={...e,...c},o={...o,...c})})),o&&t.dispatch("@changed",o)}},get:()=>e,on:(r,e)=>((n[r]||(n[r]=[])).push(e),()=>{n[r]=n[r].filter((r=>r!==e))})};return r.forEach((r=>{r&&r(t)})),t.dispatch("@init"),t})([function(r){r.on("@init",(function(){return T(G)})),r.on("store/board/click_square",(function(r,n){var e=h(n,2),t=e[0],a=e[1],o=T(r.board),i=o.rows[t][a];if(""===o.winner&&""===i.player){o.rows[t][a]=y(y({},i),{},{player:o.currentPlayer});var c=function(r,n){for(var e=function(e){var t,a=0,o=p(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,c=Math.floor(i/e.length),u=i%e.length;r[c][u].player===n&&a++}}catch(r){o.e(r)}finally{o.f()}return a===e.length},t=[[0,1,2],[3,4,5],[6,7,8],[0,4,8],[2,4,6],[0,3,6],[1,4,7],[2,5,8]],a=null,o=0,i=t;o<i.length;o++){var c=i[o];if(null!==a)return;if(e(c)){a=[];var u,l=p(c);try{for(l.s();!(u=l.n()).done;){var s=u.value;a.push({row:Math.floor(s/c.length),column:s%c.length})}}catch(r){l.e(r)}finally{l.f()}return b(a)}}if(null===a){var f,d=0,v=Math.pow(t[0].length,2),h=p(r);try{for(h.s();!(f=h.n()).done;){var y,w=f.value,g=p(w);try{for(g.s();!(y=g.n()).done;)""!==y.value.player&&d++}catch(r){g.e(r)}finally{g.f()}}}catch(r){h.e(r)}finally{h.f()}return d===v?"DRAW":null}return a}(o.rows,o.currentPlayer);if("DRAW"===c)o.winner="DRAW";else if(Array.isArray(c)){o.winner=o.currentPlayer;for(var u=0;u<c.length;u++){var l=c[u],s=l.row,f=l.column;o.rows[s][f].isWinner=1}}o.currentPlayer="X"===o.currentPlayer?"O":"X"}return{board:o}})),r.on("store/board/reset",(function(){return{board:y(y({},T(G.board)),{},{currentPlayer:F()})}}))},!1]),H=function(r,n,e){var t=w(n);t in r?s.f(r,t,g(0,e)):r[t]=e},J=l("species"),K=l("isConcatSpreadable"),L=x>=51||!j((function(){var r=[];return r[K]=!1,r.concat()[0]!==r})),Q=(z="concat",x>=51||!j((function(){var r=[];return(r.constructor={})[J]=function(){return{foo:1}},1!==r[z](Boolean).foo}))),U=function(r){if(!m(r))return!1;var n=r[K];return void 0!==n?!!n:v(r)};d({target:"Array",proto:!0,forced:!L||!Q},{concat:function(r){var n,e,t,a,o,u=i(this),l=A(u,0),s=0;for(n=-1,t=arguments.length;n<t;n++)if(U(o=-1===n?u:arguments[n])){if(s+(a=c(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(e=0;e<a;e++,s++)e in o&&H(l,s,o[e])}else{if(s>=9007199254740991)throw TypeError("Maximum allowed index exceeded");H(l,s++,o)}return l.length=s,l}});var Y=[].join,Z=_!=Object,$=P("join",",");d({target:"Array",proto:!0,forced:Z||!$},{join:function(r){return Y.call(W(this),void 0===r?",":r)}});const rr=E('<div><div class="player-text"></div><div class="replay-button"><button type="button">Play Again!</button></div></div>',8);var nr=function(){var r,n,e,t=C(),a=h(t,2),o=a[0],i=a[1],c=D((function(){return""===o.board.winner?"".concat(o.board.currentPlayer,"'s move"):"DRAW"===o.board.winner?"Draw!":"".concat(o.board.winner," is the Winner!")})),u=D((function(){var r=["header"];return o.board.winner.length&&(r=[].concat(b(r),["winner-found"])),r})),l=function(){return i("store/board/reset")};return r=rr.cloneNode(!0),n=r.firstChild,e=n.nextSibling.firstChild,M(n,c),e.__click=l,O((function(){return r.className=u().join(" ")})),r};I(["click"]);const er=E("<div></div>",2),tr=E('<div class="row"></div>',2),ar=E('<div><span class="player"></span></div>',4);var or=function(){var r=C(),n=h(r,2),e=n[0];n[1];var a,o=D((function(){return["board",""===e.board.winner?"":"winner-found"]}),e.board.winner);return a=er.cloneNode(!0),M(a,t(k,{get each(){return e.board.rows},children:function(r,n){return t(ir,{row:r,yIndex:n})}})),O((function(){return a.className=o().join(" ")})),a},ir=function(r){return n=tr.cloneNode(!0),M(n,t(k,{get each(){return r.row},children:function(n,e){return t(cr,{square:n,get yIndex(){return r.yIndex},xIndex:e})}})),n;var n},cr=function(r){var n=C(),e=h(n,2);e[0];var t,a,o=e[1],i=q(r,["yIndex","xIndex"]).shift(),c=i.yIndex,u=i.xIndex,l=function(){return o("store/board/click_square",[c(),u()])},s=D((function(){return["square",r.square.isWinner?"winner":""]}),r.square.isWinner);return t=ar.cloneNode(!0),a=t.firstChild,t.__click=l,M(a,(function(){return r.square.player})),O((function(){return t.className=s().join(" ")})),t};I(["click"]);const ur=E('<div class="tic-tac-toe"></div>',2);var lr=function(){return t(R,{store:V,get children(){var r=ur.cloneNode(!0);return M(r,t(nr,{}),null),M(r,t(or,{}),null),r}})};export default lr;export{lr as TicTacToe};
//# sourceMappingURL=TicTacToe-3d37b9dc.js.map
