import{c as r,r as n,o as e,a as t,b as a,u as o,t as i,d as c,e as l,w as u,f as s,g as f,_ as d,i as y,h,j as v,k as b,l as p,m as w,n as g,p as j,q as x,s as A,v as P,x as m,y as W,F as _,z as I}from"./bundle-81dc7086.js";const O=a();function k(a){let[o,i]=r(a.store.get()),c=a.store.on("@changed",((r,e)=>{Object.keys(e).forEach((r=>{i(r,n(e[r]))}))}));return e((()=>c())),t(O.Provider,{value:[o,a.store.dispatch],children:()=>a.children})}function q(){return o(O)}var D=u("unscopables"),N=Array.prototype;null==N[D]&&s.f(N,D,{configurable:!0,value:f(null)});var E;function M(r){if("object"!=typeof r)return r;var n,e,t=Object.prototype.toString.call(r);if("[object Object]"===t){if(r.constructor!==Object&&"function"==typeof r.constructor)for(n in e=new r.constructor,r)e.hasOwnProperty(n)&&e[n]!==r[n]&&(e[n]=M(r[n]));else for(n in e={},r)"__proto__"===n?Object.defineProperty(e,n,{value:M(r[n]),configurable:!0,enumerable:!0,writable:!0}):e[n]=M(r[n]);return e}if("[object Array]"===t){for(n=r.length,e=Array(n);n--;)e[n]=M(r[n]);return e}return"[object Set]"===t?(e=new Set,r.forEach((function(r){e.add(M(r))})),e):"[object Map]"===t?(e=new Map,r.forEach((function(r,n){e.set(M(n),M(r))})),e):"[object Date]"===t?new Date(+r):"[object RegExp]"===t?((e=new RegExp(r.source,r.flags)).lastIndex=r.lastIndex,e):"[object DataView]"===t?new r.constructor(M(r.buffer)):"[object ArrayBuffer]"===t?r.slice(0):"Array]"===t.slice(-6)?new r.constructor(r):r}d({target:"Array",proto:!0},{fill:function(r){for(var n=i(this),e=c(n.length),t=arguments.length,a=l(t>1?arguments[1]:void 0,e),o=t>2?arguments[2]:void 0,u=void 0===o?e:l(o,e);u>a;)n[a++]=r;return n}}),E="fill",N[D][E]=!0,d({target:"Array",stat:!0},{isArray:y});var R=function(){return 0===Math.round(Math.random())?"O":"X"},S={board:{winner:"",currentPlayer:R(),rows:[Array(3).fill({player:"",isWinner:0}),Array(3).fill({player:"",isWinner:0}),Array(3).fill({player:"",isWinner:0})]}},C=(r=>{let n={},e={},t={dispatch(r,a){if("@dispatch"!==r&&t.dispatch("@dispatch",[r,a,n[r]]),n[r]){let o;n[r].forEach((i=>{let c=n[r].includes(i)&&i(e,a,t);c&&"function"!=typeof c.then&&(e={...e,...c},o={...o,...c})})),o&&t.dispatch("@changed",o)}},get:()=>e,on:(r,e)=>((n[r]||(n[r]=[])).push(e),()=>{n[r]=n[r].filter((r=>r!==e))})};return r.forEach((r=>{r&&r(t)})),t.dispatch("@init"),t})([function(r){r.on("@init",(function(){return M(S)})),r.on("store/board/click_square",(function(r,n){var e=h(n,2),t=e[0],a=e[1],o=M(r.board),i=o.rows[t][a];if(""===o.winner&&""===i.player){o.rows[t][a]=v(v({},i),{},{player:o.currentPlayer});var c=function(r,n){for(var e=function(e){var t,a=0,o=b(e);try{for(o.s();!(t=o.n()).done;){var i=t.value,c=Math.floor(i/e.length),l=i%e.length;r[c][l].player===n&&a++}}catch(r){o.e(r)}finally{o.f()}return a===e.length},t=[[0,1,2],[3,4,5],[6,7,8],[0,4,8],[2,4,6],[0,3,6],[1,4,7],[2,5,8]],a=null,o=0,i=t;o<i.length;o++){var c=i[o];if(null!==a)return;if(e(c)){a=[];var l,u=b(c);try{for(u.s();!(l=u.n()).done;){var s=l.value;a.push({row:Math.floor(s/c.length),column:s%c.length})}}catch(r){u.e(r)}finally{u.f()}return p(a)}}if(null===a){var f,d=0,y=Math.pow(t[0].length,2),h=b(r);try{for(h.s();!(f=h.n()).done;){var v,w=f.value,g=b(w);try{for(g.s();!(v=g.n()).done;)""!==v.value.player&&d++}catch(r){g.e(r)}finally{g.f()}}}catch(r){h.e(r)}finally{h.f()}return d===y?"DRAW":null}return a}(o.rows,o.currentPlayer);if("DRAW"===c)o.winner="DRAW";else if(Array.isArray(c)){o.winner=o.currentPlayer;for(var l=0;l<c.length;l++){var u=c[l],s=u.row,f=u.column;o.rows[s][f].isWinner=1}}o.currentPlayer="X"===o.currentPlayer?"O":"X"}return{board:o}})),r.on("store/board/reset",(function(){return{board:v(v({},M(S.board)),{},{currentPlayer:R()})}}))},!1]),X=[].join,z=j!=Object,B=w("join",",");d({target:"Array",proto:!0,forced:z||!B},{join:function(r){return X.call(g(this),void 0===r?",":r)}});const F=x('<div><div class="player-text"></div><div class="replay-button"><button type="button">Play Again!</button></div></div>',8);var V=function(){var r,n,e,t=q(),a=h(t,2),o=a[0],i=a[1],c=P((function(){return""===o.board.winner?"".concat(o.board.currentPlayer,"'s move"):"DRAW"===o.board.winner?"Draw!":"".concat(o.board.winner," is the Winner!")})),l=P((function(){return["header",o.board.winner.length?"winner-found":""]})),u=function(){return i("store/board/reset")};return r=F.cloneNode(!0),n=r.firstChild,e=n.nextSibling.firstChild,m(n,c),e.__click=u,W((function(){return r.className=l().join(" ")})),r};A(["click"]);const G=x("<div></div>",2),H=x('<div class="row"></div>',2),J=x('<div><span class="player"></span></div>',4);var K=function(){var r=q(),n=h(r,2),e=n[0];n[1];var a,o=P((function(){return["board",""===e.board.winner?"":"winner-found"]}),e.board.winner);return a=G.cloneNode(!0),m(a,t(_,{get each(){return e.board.rows},children:function(r,n){return t(L,{row:r,yIndex:n})}})),W((function(){return a.className=o().join(" ")})),a},L=function(r){return n=H.cloneNode(!0),m(n,t(_,{get each(){return r.row},children:function(n,e){return t(Q,{square:n,get yIndex(){return r.yIndex},xIndex:e})}})),n;var n},Q=function(r){var n=q(),e=h(n,2);e[0];var t,a,o=e[1],i=I(r,["yIndex","xIndex"]).shift(),c=i.yIndex,l=i.xIndex,u=function(){return o("store/board/click_square",[c(),l()])},s=P((function(){return["square",r.square.isWinner?"winner":""]}),r.square.isWinner);return t=J.cloneNode(!0),a=t.firstChild,t.__click=u,m(a,(function(){return r.square.player})),W((function(){return t.className=s().join(" ")})),t};A(["click"]);const T=x('<div class="tic-tac-toe"></div>',2);var U=function(){return t(k,{store:C,get children(){var r=T.cloneNode(!0);return m(r,t(V,{}),null),m(r,t(K,{}),null),r}})};export default U;export{U as TicTacToe};
//# sourceMappingURL=TicTacToe-19129a89.js.map
